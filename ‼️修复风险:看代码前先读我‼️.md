注意⚠️，下面的这段代码`@available`会调用sscanf,进而会导致格式化字符串漏洞，可通过版本号判断代替
//    if (@available(iOS 11.0, *)) {
//        NSLog(@"is ios 11");
//    }
////
if ([[UIDevice currentDevice].systemVersion floatValue] >= 11) {
    NSLog(@"is ios 11");
}

这个是系统内部实现调用，不确定有没有作校验处理之类的， 如果改动较大，可以忽略

# 需要添加代码解决风险项的代码

包含:
1.越狱设备运行风险
2.数据库明文存储风险
3.动态调试攻击风险
4.检测是否使用代理
5.注入攻击风险防护
6.篡改和二次打包风险

CheckDemo/CheckTestOC.m及CheckDemo/CheckTest.swift列出了需要添加代码解决风险项的代码，可参考并依据实际情况修改.

# 其它需要修改或移除函数的风险项，如果要查找风险项函数在项目的哪个第三方库

使用find_symbol/find_symbol.sh脚本进行查找，调用格式为:find_symbol.sh <工程目录全路径> <要查找的函数名>

脚本实现原理:
该脚本会递归遍历工程目录，使用nm命令查看.a/.framework文件的符号
如果匹配到，就会打印出对应的符号如'U _CC_MD5', 然后在打印行往上找最近的库文件，就是包含这个函数的第三方库

例如:
./find_symbol.sh <path/to/project> <要查找的符号(CC_MD5,mprotect,printf,NSLog...等等)>

# 外部函数调用风险项解决方案

找到报风险的函数，如果能改源码，就用void *func = dlsym(RTLD_DEFAULT, "_dyld_get_image_name"); func(i)， 这种得到函数指针, 然后强转为对应函数类型，进行调用

# 混淆类名及函数名

symbol_obf下列出了一种使用宏定义混淆OC符号的方案，可参考实际情况使用。

